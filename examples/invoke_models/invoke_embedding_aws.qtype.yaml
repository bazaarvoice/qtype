id: invoke_embedding_test
description: Test InvokeEmbedding step with AWS Bedrock embeddings

# AWS Authentication for Bedrock
auths:
  - type: aws
    id: aws_auth
    profile_name: ${AWS_PROFILE}

models:
  # Embedding model using AWS Bedrock
  - type: EmbeddingModel
    id: titan_embed
    provider: aws-bedrock
    model_id: amazon.titan-embed-text-v2:0
    dimensions: 1024
    auth: aws_auth

flows:
  - type: Flow
    id: test_invoke_embedding
    description: Generate embeddings for text using AWS Bedrock
    
    variables:
      - id: input_text
        type: text
        ui:
          widget: textarea
      - id: embedding
        type: Embedding
    
    inputs:
      - input_text
    
    outputs:
      - embedding
    
    steps:
      - id: generate_embedding
        type: InvokeEmbedding
        model: titan_embed
        inputs:
          - input_text
        outputs:
          - embedding
