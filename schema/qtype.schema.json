{
  "$defs": {
    "APIKeyAuthProvider": {
      "additionalProperties": false,
      "description": "API key-based authentication provider.",
      "properties": {
        "id": {
          "description": "Unique ID of the authorization configuration.",
          "title": "Id",
          "type": "string"
        },
        "type": {
          "const": "api_key",
          "default": "api_key",
          "title": "Type",
          "type": "string"
        },
        "api_key": {
          "description": "API key for authentication.",
          "title": "Api Key",
          "type": "string"
        },
        "host": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Base URL or domain of the provider.",
          "title": "Host"
        }
      },
      "required": [
        "id",
        "api_key"
      ],
      "title": "APIKeyAuthProvider",
      "type": "object"
    },
    "APITool": {
      "additionalProperties": false,
      "description": "Tool that invokes an API endpoint.",
      "properties": {
        "id": {
          "description": "Unique ID of this component.",
          "title": "Id",
          "type": "string"
        },
        "name": {
          "description": "Name of the tool function.",
          "title": "Name",
          "type": "string"
        },
        "description": {
          "description": "Description of what the tool does.",
          "title": "Description",
          "type": "string"
        },
        "inputs": {
          "additionalProperties": {
            "$ref": "#/$defs/ToolParameter"
          },
          "description": "Input parameters required by this tool.",
          "title": "Inputs",
          "type": "object"
        },
        "outputs": {
          "additionalProperties": {
            "$ref": "#/$defs/ToolParameter"
          },
          "description": "Output parameters produced by this tool.",
          "title": "Outputs",
          "type": "object"
        },
        "type": {
          "const": "APITool",
          "default": "APITool",
          "title": "Type",
          "type": "string"
        },
        "endpoint": {
          "description": "API endpoint URL to call.",
          "title": "Endpoint",
          "type": "string"
        },
        "method": {
          "default": "GET",
          "description": "HTTP method to use (GET, POST, PUT, DELETE, etc.).",
          "title": "Method",
          "type": "string"
        },
        "auth": {
          "anyOf": [
            {
              "$ref": "#/$defs/Reference_Union_APIKeyAuthProvider__BearerTokenAuthProvider__AWSAuthProvider__OAuth2AuthProvider__VertexAuthProvider__"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Optional AuthorizationProvider for API authentication.",
          "title": "Auth"
        },
        "headers": {
          "additionalProperties": {
            "type": "string"
          },
          "description": "Optional HTTP headers to include in the request.",
          "title": "Headers",
          "type": "object"
        },
        "parameters": {
          "additionalProperties": {
            "$ref": "#/$defs/ToolParameter"
          },
          "description": "Output parameters produced by this tool.",
          "title": "Parameters",
          "type": "object"
        }
      },
      "required": [
        "id",
        "name",
        "description",
        "endpoint"
      ],
      "title": "APITool",
      "type": "object"
    },
    "AWSAuthProvider": {
      "additionalProperties": false,
      "description": "AWS authentication provider supporting multiple credential methods.",
      "properties": {
        "id": {
          "description": "Unique ID of the authorization configuration.",
          "title": "Id",
          "type": "string"
        },
        "type": {
          "const": "aws",
          "default": "aws",
          "title": "Type",
          "type": "string"
        },
        "access_key_id": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "AWS access key ID.",
          "title": "Access Key Id"
        },
        "secret_access_key": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "AWS secret access key.",
          "title": "Secret Access Key"
        },
        "session_token": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "AWS session token for temporary credentials.",
          "title": "Session Token"
        },
        "profile_name": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "AWS profile name from credentials file.",
          "title": "Profile Name"
        },
        "role_arn": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "ARN of the role to assume.",
          "title": "Role Arn"
        },
        "role_session_name": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Session name for role assumption.",
          "title": "Role Session Name"
        },
        "external_id": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "External ID for role assumption.",
          "title": "External Id"
        },
        "region": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "AWS region.",
          "title": "Region"
        }
      },
      "required": [
        "id"
      ],
      "title": "AWSAuthProvider",
      "type": "object"
    },
    "Agent": {
      "additionalProperties": false,
      "description": "Defines an agent that can perform tasks and make decisions based on user input and context.",
      "properties": {
        "concurrency_config": {
          "$ref": "#/$defs/ConcurrencyConfig",
          "description": "Configuration for processing the input stream concurrently. If omitted, the step processes items sequentially."
        },
        "id": {
          "description": "Unique ID of this component.",
          "title": "Id",
          "type": "string"
        },
        "type": {
          "const": "Agent",
          "default": "Agent",
          "title": "Type",
          "type": "string"
        },
        "cardinality": {
          "$ref": "#/$defs/StepCardinality",
          "default": "one",
          "description": "Does this step emit 1 (one) or 0...N (many) instances of the outputs?"
        },
        "inputs": {
          "description": "References to the variables required by this step.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Inputs",
          "type": "array"
        },
        "outputs": {
          "description": "References to the variables where output is stored.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Outputs",
          "type": "array"
        },
        "memory": {
          "anyOf": [
            {
              "$ref": "#/$defs/Reference_Memory_"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "A reference to a Memory object to retain context across interactions.",
          "title": "Memory"
        },
        "model": {
          "anyOf": [
            {
              "$ref": "#/$defs/Reference_Model_"
            },
            {
              "type": "string"
            }
          ],
          "description": "The model to use for inference.",
          "title": "Model"
        },
        "system_message": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Optional system message to set the context for the model.",
          "title": "System Message"
        },
        "tools": {
          "description": "List of tools available to the agent.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Annotated_Union_APITool__PythonFunctionTool___FieldInfo_annotation_NoneType__required_True__discriminator__type____"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Tools",
          "type": "array"
        }
      },
      "required": [
        "id",
        "model"
      ],
      "title": "Agent",
      "type": "object"
    },
    "Aggregate": {
      "additionalProperties": false,
      "description": "A terminal step that consumes an entire input stream and produces a single\nsummary message with success/error counts.",
      "properties": {
        "id": {
          "description": "Unique ID of this component.",
          "title": "Id",
          "type": "string"
        },
        "type": {
          "const": "Aggregate",
          "default": "Aggregate",
          "title": "Type",
          "type": "string"
        },
        "cardinality": {
          "const": "one",
          "default": "one",
          "title": "Cardinality",
          "type": "string"
        },
        "inputs": {
          "description": "References to the variables required by this step.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Inputs",
          "type": "array"
        },
        "outputs": {
          "description": "References to the variables for the output. There should be one and only one output with type AggregateStats",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Outputs",
          "type": "array"
        }
      },
      "required": [
        "id"
      ],
      "title": "Aggregate",
      "type": "object"
    },
    "Application": {
      "additionalProperties": false,
      "description": "Defines a complete QType application specification.\n\nAn Application is the top-level container of the entire\nprogram in a QType YAML file. It serves as the blueprint for your\nAI-powered application, containing all the models, flows, tools, data sources,\nand configuration needed to run your program. Think of it as the main entry\npoint that ties together all components into a cohesive,\nexecutable system.",
      "properties": {
        "id": {
          "description": "Unique ID of the application.",
          "title": "Id",
          "type": "string"
        },
        "description": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Optional description of the application.",
          "title": "Description"
        },
        "memories": {
          "description": "List of memory definitions used in this application.",
          "items": {
            "$ref": "#/$defs/Memory"
          },
          "title": "Memories",
          "type": "array"
        },
        "models": {
          "description": "List of models used in this application.",
          "items": {
            "discriminator": {
              "mapping": {
                "EmbeddingModel": "#/$defs/EmbeddingModel",
                "Model": "#/$defs/Model"
              },
              "propertyName": "type"
            },
            "oneOf": [
              {
                "$ref": "#/$defs/EmbeddingModel"
              },
              {
                "$ref": "#/$defs/Model"
              }
            ]
          },
          "title": "Models",
          "type": "array"
        },
        "types": {
          "description": "List of custom types defined in this application.",
          "items": {
            "$ref": "#/$defs/CustomType"
          },
          "title": "Types",
          "type": "array"
        },
        "flows": {
          "description": "List of flows defined in this application.",
          "items": {
            "$ref": "#/$defs/Flow"
          },
          "title": "Flows",
          "type": "array"
        },
        "auths": {
          "description": "List of authorization providers used for API access.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/APIKeyAuthProvider"
              },
              {
                "$ref": "#/$defs/BearerTokenAuthProvider"
              },
              {
                "$ref": "#/$defs/AWSAuthProvider"
              },
              {
                "$ref": "#/$defs/OAuth2AuthProvider"
              },
              {
                "$ref": "#/$defs/VertexAuthProvider"
              }
            ]
          },
          "title": "Auths",
          "type": "array"
        },
        "tools": {
          "description": "List of tools available in this application.",
          "items": {
            "discriminator": {
              "mapping": {
                "APITool": "#/$defs/APITool",
                "PythonFunctionTool": "#/$defs/PythonFunctionTool"
              },
              "propertyName": "type"
            },
            "oneOf": [
              {
                "$ref": "#/$defs/APITool"
              },
              {
                "$ref": "#/$defs/PythonFunctionTool"
              }
            ]
          },
          "title": "Tools",
          "type": "array"
        },
        "indexes": {
          "description": "List of indexes available for search operations.",
          "items": {
            "discriminator": {
              "mapping": {
                "DocumentIndex": "#/$defs/DocumentIndex",
                "VectorIndex": "#/$defs/VectorIndex"
              },
              "propertyName": "type"
            },
            "oneOf": [
              {
                "$ref": "#/$defs/DocumentIndex"
              },
              {
                "$ref": "#/$defs/VectorIndex"
              }
            ]
          },
          "title": "Indexes",
          "type": "array"
        },
        "telemetry": {
          "anyOf": [
            {
              "$ref": "#/$defs/TelemetrySink"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Optional telemetry sink for observability."
        },
        "references": {
          "description": "List of other q-type documents you may use. This allows modular composition and reuse of components across applications.",
          "items": {
            "$ref": "#/$defs/Document"
          },
          "title": "References",
          "type": "array"
        }
      },
      "required": [
        "id"
      ],
      "title": "Application",
      "type": "object"
    },
    "AuthorizationProviderList": {
      "description": "Schema for a standalone list of authorization providers.",
      "items": {
        "anyOf": [
          {
            "$ref": "#/$defs/APIKeyAuthProvider"
          },
          {
            "$ref": "#/$defs/BearerTokenAuthProvider"
          },
          {
            "$ref": "#/$defs/AWSAuthProvider"
          },
          {
            "$ref": "#/$defs/OAuth2AuthProvider"
          },
          {
            "$ref": "#/$defs/VertexAuthProvider"
          }
        ]
      },
      "title": "AuthorizationProviderList",
      "type": "array"
    },
    "BatchConfig": {
      "description": "Configuration for batch execution.\n\nAttributes:\n    num_workers: Number of async workers for batch operations.",
      "properties": {
        "batch_size": {
          "default": 25,
          "description": "Max number of rows to send to a step at a time",
          "exclusiveMinimum": 0,
          "title": "Batch Size",
          "type": "integer"
        }
      },
      "title": "BatchConfig",
      "type": "object"
    },
    "BearerTokenAuthProvider": {
      "additionalProperties": false,
      "description": "Bearer token authentication provider.",
      "properties": {
        "id": {
          "description": "Unique ID of the authorization configuration.",
          "title": "Id",
          "type": "string"
        },
        "type": {
          "const": "bearer_token",
          "default": "bearer_token",
          "title": "Type",
          "type": "string"
        },
        "token": {
          "description": "Bearer token for authentication.",
          "title": "Token",
          "type": "string"
        }
      },
      "required": [
        "id",
        "token"
      ],
      "title": "BearerTokenAuthProvider",
      "type": "object"
    },
    "ConcurrencyConfig": {
      "description": "Configuration for concurrent processing.\n\nAttributes:\n    num_workers: Number of async workers for batch operations.",
      "properties": {
        "num_workers": {
          "default": 1,
          "description": "Number of async workers for batch operations",
          "exclusiveMinimum": 0,
          "title": "Num Workers",
          "type": "integer"
        }
      },
      "title": "ConcurrencyConfig",
      "type": "object"
    },
    "ConstantPath": {
      "additionalProperties": false,
      "properties": {
        "uri": {
          "description": "A constant Fsspec URI.",
          "title": "Uri",
          "type": "string"
        }
      },
      "required": [
        "uri"
      ],
      "title": "ConstantPath",
      "type": "object"
    },
    "CustomType": {
      "additionalProperties": false,
      "description": "A simple declaration of a custom data type by the user.",
      "properties": {
        "id": {
          "title": "Id",
          "type": "string"
        },
        "description": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Description"
        },
        "properties": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "title": "Properties"
        }
      },
      "required": [
        "id",
        "properties"
      ],
      "title": "CustomType",
      "type": "object"
    },
    "Decoder": {
      "additionalProperties": false,
      "description": "Defines a step that decodes string data into structured outputs.\n\nIf parsing fails, the step will raise an error and halt execution.\nUse conditional logic in your flow to handle potential parsing errors.",
      "properties": {
        "id": {
          "description": "Unique ID of this component.",
          "title": "Id",
          "type": "string"
        },
        "type": {
          "const": "Decoder",
          "default": "Decoder",
          "title": "Type",
          "type": "string"
        },
        "cardinality": {
          "$ref": "#/$defs/StepCardinality",
          "default": "one",
          "description": "Does this step emit 1 (one) or 0...N (many) instances of the outputs?"
        },
        "inputs": {
          "description": "References to the variables required by this step.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Inputs",
          "type": "array"
        },
        "outputs": {
          "description": "References to the variables where output is stored.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Outputs",
          "type": "array"
        },
        "format": {
          "$ref": "#/$defs/DecoderFormat",
          "default": "json",
          "description": "Format in which the decoder processes data. Defaults to JSON."
        }
      },
      "required": [
        "id"
      ],
      "title": "Decoder",
      "type": "object"
    },
    "DecoderFormat": {
      "description": "Defines the format in which the decoder step processes data.",
      "enum": [
        "json",
        "xml"
      ],
      "title": "DecoderFormat",
      "type": "string"
    },
    "DocToTextConverter": {
      "additionalProperties": false,
      "description": "Defines a step to convert raw documents (e.g., PDF, DOCX) loaded by a DocumentSource into plain text\nusing an external tool like Docling or LlamaParse for pre-processing before chunking.\nThe input and output are both RAGDocument, but the output after processing with have content of type markdown.",
      "properties": {
        "concurrency_config": {
          "$ref": "#/$defs/ConcurrencyConfig",
          "description": "Configuration for processing the input stream concurrently. If omitted, the step processes items sequentially."
        },
        "id": {
          "description": "Unique ID of this component.",
          "title": "Id",
          "type": "string"
        },
        "type": {
          "const": "DocToTextConverter",
          "default": "DocToTextConverter",
          "title": "Type",
          "type": "string"
        },
        "cardinality": {
          "$ref": "#/$defs/StepCardinality",
          "default": "one",
          "description": "Does this step emit 1 (one) or 0...N (many) instances of the outputs?"
        },
        "inputs": {
          "description": "References to the variables required by this step.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Inputs",
          "type": "array"
        },
        "outputs": {
          "description": "References to the variables where output is stored.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Outputs",
          "type": "array"
        }
      },
      "required": [
        "id"
      ],
      "title": "DocToTextConverter",
      "type": "object"
    },
    "Document": {
      "anyOf": [
        {
          "$ref": "#/$defs/Application"
        },
        {
          "$ref": "#/$defs/AuthorizationProviderList"
        },
        {
          "$ref": "#/$defs/ModelList"
        },
        {
          "$ref": "#/$defs/ToolList"
        },
        {
          "$ref": "#/$defs/TypeList"
        },
        {
          "$ref": "#/$defs/VariableList"
        }
      ],
      "description": "Schema for any valid QType document structure.\n\nThis allows validation of standalone lists of components, individual components,\nor full QType application specs. Supports modular composition and reuse.",
      "title": "Document"
    },
    "DocumentEmbedder": {
      "additionalProperties": false,
      "description": "Embeds document chunks using a specified embedding model.",
      "properties": {
        "concurrency_config": {
          "$ref": "#/$defs/ConcurrencyConfig",
          "description": "Configuration for processing the input stream concurrently. If omitted, the step processes items sequentially."
        },
        "id": {
          "description": "Unique ID of this component.",
          "title": "Id",
          "type": "string"
        },
        "type": {
          "const": "DocumentEmbedder",
          "default": "DocumentEmbedder",
          "title": "Type",
          "type": "string"
        },
        "cardinality": {
          "const": "many",
          "default": "many",
          "description": "Consumes one chunk and emits one embedded chunk.",
          "title": "Cardinality",
          "type": "string"
        },
        "inputs": {
          "description": "References to the variables required by this step.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Inputs",
          "type": "array"
        },
        "outputs": {
          "description": "References to the variables where output is stored.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Outputs",
          "type": "array"
        },
        "model": {
          "anyOf": [
            {
              "$ref": "#/$defs/Reference_EmbeddingModel_"
            },
            {
              "type": "string"
            }
          ],
          "description": "Embedding model to use for vectorization.",
          "title": "Model"
        }
      },
      "required": [
        "id",
        "model"
      ],
      "title": "DocumentEmbedder",
      "type": "object"
    },
    "DocumentIndex": {
      "additionalProperties": false,
      "description": "Document search index for text-based search (e.g., Elasticsearch, OpenSearch).",
      "properties": {
        "id": {
          "description": "Unique ID of the index.",
          "title": "Id",
          "type": "string"
        },
        "args": {
          "additionalProperties": true,
          "description": "Index-specific configuration and connection parameters.",
          "title": "Args",
          "type": "object"
        },
        "auth": {
          "anyOf": [
            {
              "$ref": "#/$defs/Reference_Union_APIKeyAuthProvider__BearerTokenAuthProvider__AWSAuthProvider__OAuth2AuthProvider__VertexAuthProvider__"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "AuthorizationProvider for accessing the index.",
          "title": "Auth"
        },
        "name": {
          "description": "Name of the index/collection/table.",
          "title": "Name",
          "type": "string"
        },
        "type": {
          "const": "DocumentIndex",
          "default": "DocumentIndex",
          "title": "Type",
          "type": "string"
        }
      },
      "required": [
        "id",
        "name"
      ],
      "title": "DocumentIndex",
      "type": "object"
    },
    "DocumentSearch": {
      "additionalProperties": false,
      "description": "Performs document search against a document index.",
      "properties": {
        "concurrency_config": {
          "$ref": "#/$defs/ConcurrencyConfig",
          "description": "Configuration for processing the input stream concurrently. If omitted, the step processes items sequentially."
        },
        "id": {
          "description": "Unique ID of this component.",
          "title": "Id",
          "type": "string"
        },
        "type": {
          "const": "DocumentSearch",
          "default": "DocumentSearch",
          "title": "Type",
          "type": "string"
        },
        "cardinality": {
          "$ref": "#/$defs/StepCardinality",
          "default": "one",
          "description": "Does this step emit 1 (one) or 0...N (many) instances of the outputs?"
        },
        "inputs": {
          "description": "References to the variables required by this step.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Inputs",
          "type": "array"
        },
        "outputs": {
          "description": "References to the variables where output is stored.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Outputs",
          "type": "array"
        },
        "filters": {
          "additionalProperties": true,
          "description": "Optional filters to apply during search.",
          "title": "Filters",
          "type": "object"
        },
        "index": {
          "anyOf": [
            {
              "$ref": "#/$defs/Reference_Annotated_Union_DocumentIndex__VectorIndex___FieldInfo_annotation_NoneType__required_True__discriminator__type____"
            },
            {
              "type": "string"
            }
          ],
          "description": "Index to search against (object or ID reference).",
          "title": "Index"
        }
      },
      "required": [
        "id",
        "index"
      ],
      "title": "DocumentSearch",
      "type": "object"
    },
    "DocumentSource": {
      "additionalProperties": false,
      "description": "A source of documents that will be used in retrieval augmented generation.\nIt uses LlamaIndex readers to load one or more raw Documents\nfrom a specified path or system (e.g., Google Drive, web page).\nSee https://github.com/run-llama/llama_index/tree/main/llama-index-integrations/readers",
      "properties": {
        "id": {
          "description": "Unique ID of the data source.",
          "title": "Id",
          "type": "string"
        },
        "type": {
          "const": "DocumentSource",
          "default": "DocumentSource",
          "title": "Type",
          "type": "string"
        },
        "cardinality": {
          "const": "many",
          "default": "many",
          "description": "Sources always emit 0...N instances of the outputs.",
          "title": "Cardinality",
          "type": "string"
        },
        "inputs": {
          "description": "References to the variables required by this step.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Inputs",
          "type": "array"
        },
        "outputs": {
          "description": "References to the variables where output is stored.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Outputs",
          "type": "array"
        },
        "reader_module": {
          "description": "Module path of the LlamaIndex Reader without 'llama_index.readers' (e.g., 'google.GoogleDriveReader', 'file.IPYNBReader').",
          "title": "Reader Module",
          "type": "string"
        },
        "args": {
          "additionalProperties": true,
          "description": "Reader-specific arguments to pass to the LlamaIndex constructor.",
          "title": "Args",
          "type": "object"
        },
        "auth": {
          "anyOf": [
            {
              "$ref": "#/$defs/Reference_Union_APIKeyAuthProvider__BearerTokenAuthProvider__AWSAuthProvider__OAuth2AuthProvider__VertexAuthProvider__"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "AuthorizationProvider for accessing the source.",
          "title": "Auth"
        }
      },
      "required": [
        "id",
        "reader_module"
      ],
      "title": "DocumentSource",
      "type": "object"
    },
    "DocumentSplitter": {
      "additionalProperties": false,
      "description": "Configuration for chunking/splitting documents into embeddable nodes/chunks.",
      "properties": {
        "concurrency_config": {
          "$ref": "#/$defs/ConcurrencyConfig",
          "description": "Configuration for processing the input stream concurrently. If omitted, the step processes items sequentially."
        },
        "id": {
          "description": "Unique ID of this component.",
          "title": "Id",
          "type": "string"
        },
        "type": {
          "const": "DocumentSplitter",
          "default": "DocumentSplitter",
          "title": "Type",
          "type": "string"
        },
        "cardinality": {
          "const": "many",
          "default": "many",
          "description": "Consumes one document and emits 0...N nodes/chunks.",
          "title": "Cardinality",
          "type": "string"
        },
        "inputs": {
          "description": "References to the variables required by this step.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Inputs",
          "type": "array"
        },
        "outputs": {
          "description": "References to the variables where output is stored.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Outputs",
          "type": "array"
        },
        "splitter_name": {
          "default": "SentenceSplitter",
          "description": "Name of the LlamaIndex TextSplitter class.",
          "title": "Splitter Name",
          "type": "string"
        },
        "chunk_size": {
          "default": 1024,
          "description": "Size of each chunk.",
          "title": "Chunk Size",
          "type": "integer"
        },
        "chunk_overlap": {
          "default": 20,
          "description": "Overlap between consecutive chunks.",
          "title": "Chunk Overlap",
          "type": "integer"
        },
        "args": {
          "additionalProperties": true,
          "description": "Additional arguments specific to the chosen splitter class.",
          "title": "Args",
          "type": "object"
        }
      },
      "required": [
        "id"
      ],
      "title": "DocumentSplitter",
      "type": "object"
    },
    "EmbeddingModel": {
      "additionalProperties": false,
      "description": "Describes an embedding model configuration, extending the base Model class.",
      "properties": {
        "type": {
          "const": "EmbeddingModel",
          "default": "EmbeddingModel",
          "title": "Type",
          "type": "string"
        },
        "id": {
          "description": "Unique ID for the model.",
          "title": "Id",
          "type": "string"
        },
        "auth": {
          "anyOf": [
            {
              "$ref": "#/$defs/Reference_Union_APIKeyAuthProvider__BearerTokenAuthProvider__AWSAuthProvider__OAuth2AuthProvider__VertexAuthProvider__"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "AuthorizationProvider used for model access.",
          "title": "Auth"
        },
        "inference_params": {
          "additionalProperties": true,
          "description": "Optional inference parameters like temperature or max_tokens.",
          "title": "Inference Params",
          "type": "object"
        },
        "model_id": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "The specific model name or ID for the provider. If None, id is used",
          "title": "Model Id"
        },
        "provider": {
          "description": "Name of the provider, e.g., openai or anthropic.",
          "title": "Provider",
          "type": "string"
        },
        "dimensions": {
          "description": "Dimensionality of the embedding vectors produced by this model.",
          "title": "Dimensions",
          "type": "integer"
        }
      },
      "required": [
        "id",
        "provider",
        "dimensions"
      ],
      "title": "EmbeddingModel",
      "type": "object"
    },
    "FileSource": {
      "additionalProperties": false,
      "description": "File source that reads data from a file using fsspec-compatible URIs.",
      "properties": {
        "id": {
          "description": "Unique ID of the data source.",
          "title": "Id",
          "type": "string"
        },
        "type": {
          "const": "FileSource",
          "default": "FileSource",
          "title": "Type",
          "type": "string"
        },
        "cardinality": {
          "const": "many",
          "default": "many",
          "description": "Sources always emit 0...N instances of the outputs.",
          "title": "Cardinality",
          "type": "string"
        },
        "inputs": {
          "description": "References to the variables required by this step.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Inputs",
          "type": "array"
        },
        "outputs": {
          "description": "References to the variables where output is stored.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Outputs",
          "type": "array"
        },
        "path": {
          "anyOf": [
            {
              "$ref": "#/$defs/ConstantPath"
            },
            {
              "$ref": "#/$defs/Reference_Variable_"
            },
            {
              "type": "string"
            }
          ],
          "description": "Reference to a variable with an fsspec-compatible URI to read from, or the uri itself.",
          "title": "Path"
        }
      },
      "required": [
        "id",
        "path"
      ],
      "title": "FileSource",
      "type": "object"
    },
    "FileWriter": {
      "additionalProperties": false,
      "description": "File writer that writes data to a file using fsspec-compatible URIs.",
      "properties": {
        "batch_config": {
          "$ref": "#/$defs/BatchConfig",
          "description": "Configuration for processing the input stream in batches. If omitted, the step processes items one by one."
        },
        "id": {
          "description": "Unique ID of the data writer.",
          "title": "Id",
          "type": "string"
        },
        "type": {
          "const": "FileWriter",
          "default": "FileWriter",
          "title": "Type",
          "type": "string"
        },
        "cardinality": {
          "$ref": "#/$defs/StepCardinality",
          "default": "one",
          "description": "Does this step emit 1 (one) or 0...N (many) instances of the outputs?"
        },
        "inputs": {
          "description": "References to the variables required by this step.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Inputs",
          "type": "array"
        },
        "outputs": {
          "description": "References to the variables where output is stored.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Outputs",
          "type": "array"
        },
        "path": {
          "anyOf": [
            {
              "$ref": "#/$defs/ConstantPath"
            },
            {
              "$ref": "#/$defs/Reference_Variable_"
            },
            {
              "type": "string"
            }
          ],
          "description": "Reference to a variable with an fsspec-compatible URI to read from, or the uri itself.",
          "title": "Path"
        }
      },
      "required": [
        "id",
        "path"
      ],
      "title": "FileWriter",
      "type": "object"
    },
    "Flow": {
      "additionalProperties": false,
      "description": "Defines a flow of steps that can be executed in sequence or parallel.\nIf input or output variables are not specified, they are inferred from\nthe first and last step, respectively.",
      "properties": {
        "id": {
          "description": "Unique ID of the flow.",
          "title": "Id",
          "type": "string"
        },
        "type": {
          "const": "Flow",
          "default": "Flow",
          "title": "Type",
          "type": "string"
        },
        "description": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Optional description of the flow.",
          "title": "Description"
        },
        "steps": {
          "description": "List of steps or references to steps",
          "items": {
            "anyOf": [
              {
                "discriminator": {
                  "mapping": {
                    "Agent": "#/$defs/Agent",
                    "Aggregate": "#/$defs/Aggregate",
                    "Decoder": "#/$defs/Decoder",
                    "DocToTextConverter": "#/$defs/DocToTextConverter",
                    "DocumentEmbedder": "#/$defs/DocumentEmbedder",
                    "DocumentSearch": "#/$defs/DocumentSearch",
                    "DocumentSource": "#/$defs/DocumentSource",
                    "DocumentSplitter": "#/$defs/DocumentSplitter",
                    "FileSource": "#/$defs/FileSource",
                    "FileWriter": "#/$defs/FileWriter",
                    "IndexUpsert": "#/$defs/IndexUpsert",
                    "InvokeEmbedding": "#/$defs/InvokeEmbedding",
                    "InvokeFlow": "#/$defs/InvokeFlow",
                    "InvokeTool": "#/$defs/InvokeTool",
                    "LLMInference": "#/$defs/LLMInference",
                    "PromptTemplate": "#/$defs/PromptTemplate",
                    "SQLSource": "#/$defs/SQLSource",
                    "VectorSearch": "#/$defs/VectorSearch"
                  },
                  "propertyName": "type"
                },
                "oneOf": [
                  {
                    "$ref": "#/$defs/Agent"
                  },
                  {
                    "$ref": "#/$defs/Aggregate"
                  },
                  {
                    "$ref": "#/$defs/Decoder"
                  },
                  {
                    "$ref": "#/$defs/DocToTextConverter"
                  },
                  {
                    "$ref": "#/$defs/DocumentEmbedder"
                  },
                  {
                    "$ref": "#/$defs/DocumentSearch"
                  },
                  {
                    "$ref": "#/$defs/DocumentSplitter"
                  },
                  {
                    "$ref": "#/$defs/DocumentSource"
                  },
                  {
                    "$ref": "#/$defs/InvokeEmbedding"
                  },
                  {
                    "$ref": "#/$defs/FileWriter"
                  },
                  {
                    "$ref": "#/$defs/FileSource"
                  },
                  {
                    "$ref": "#/$defs/IndexUpsert"
                  },
                  {
                    "$ref": "#/$defs/InvokeFlow"
                  },
                  {
                    "$ref": "#/$defs/InvokeTool"
                  },
                  {
                    "$ref": "#/$defs/LLMInference"
                  },
                  {
                    "$ref": "#/$defs/PromptTemplate"
                  },
                  {
                    "$ref": "#/$defs/SQLSource"
                  },
                  {
                    "$ref": "#/$defs/VectorSearch"
                  }
                ]
              },
              {
                "$ref": "#/$defs/Reference_Annotated_Union_Agent__Aggregate__Decoder__DocToTextConverter__DocumentEmbedder__DocumentSearch__DocumentSplitter__DocumentSource__InvokeEmbedding__FileWriter__FileSource__IndexUpsert__InvokeFlow__InvokeTool__LLMInference__PromptTemplate__SQLSource__VectorSearch___FieldInfo_annotation_NoneType__required_True__discriminator__type____"
              }
            ]
          },
          "title": "Steps",
          "type": "array"
        },
        "interface": {
          "anyOf": [
            {
              "$ref": "#/$defs/FlowInterface"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "variables": {
          "description": "List of variables available at the application scope.",
          "items": {
            "$ref": "#/$defs/Variable"
          },
          "title": "Variables",
          "type": "array"
        },
        "inputs": {
          "description": "Input variables required by this step.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Inputs",
          "type": "array"
        },
        "outputs": {
          "description": "Resulting variables",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Outputs",
          "type": "array"
        }
      },
      "required": [
        "id"
      ],
      "title": "Flow",
      "type": "object"
    },
    "FlowInterface": {
      "additionalProperties": false,
      "description": "Defines the public-facing contract for a Flow, guiding the UI\nand session management.",
      "properties": {
        "type": {
          "default": "Complete",
          "enum": [
            "Complete",
            "Conversational"
          ],
          "title": "Type",
          "type": "string"
        },
        "session_inputs": {
          "description": "A list of input variable IDs that are set once and then persisted across a session.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Session Inputs",
          "type": "array"
        }
      },
      "title": "FlowInterface",
      "type": "object"
    },
    "IndexUpsert": {
      "additionalProperties": false,
      "properties": {
        "batch_config": {
          "$ref": "#/$defs/BatchConfig",
          "description": "Configuration for processing the input stream in batches. If omitted, the step processes items one by one."
        },
        "id": {
          "description": "Unique ID of the data writer.",
          "title": "Id",
          "type": "string"
        },
        "type": {
          "const": "IndexUpsert",
          "default": "IndexUpsert",
          "title": "Type",
          "type": "string"
        },
        "cardinality": {
          "$ref": "#/$defs/StepCardinality",
          "default": "one",
          "description": "Does this step emit 1 (one) or 0...N (many) instances of the outputs?"
        },
        "inputs": {
          "description": "References to the variables required by this step.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Inputs",
          "type": "array"
        },
        "outputs": {
          "description": "References to the variables where output is stored.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Outputs",
          "type": "array"
        },
        "index": {
          "anyOf": [
            {
              "$ref": "#/$defs/Reference_Annotated_Union_DocumentIndex__VectorIndex___FieldInfo_annotation_NoneType__required_True__discriminator__type____"
            },
            {
              "type": "string"
            }
          ],
          "description": "Index to upsert into (object or ID reference).",
          "title": "Index"
        }
      },
      "required": [
        "id",
        "index"
      ],
      "title": "IndexUpsert",
      "type": "object"
    },
    "InvokeEmbedding": {
      "additionalProperties": false,
      "description": "Defines a step that generates embeddings using an embedding model.\nIt takes input variables and produces output variables containing the embeddings.",
      "properties": {
        "concurrency_config": {
          "$ref": "#/$defs/ConcurrencyConfig",
          "description": "Configuration for processing the input stream concurrently. If omitted, the step processes items sequentially."
        },
        "id": {
          "description": "Unique ID of this component.",
          "title": "Id",
          "type": "string"
        },
        "type": {
          "const": "InvokeEmbedding",
          "default": "InvokeEmbedding",
          "title": "Type",
          "type": "string"
        },
        "cardinality": {
          "$ref": "#/$defs/StepCardinality",
          "default": "one",
          "description": "Does this step emit 1 (one) or 0...N (many) instances of the outputs?"
        },
        "inputs": {
          "description": "References to the variables required by this step.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Inputs",
          "type": "array"
        },
        "outputs": {
          "description": "References to the variables where output is stored.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Outputs",
          "type": "array"
        },
        "model": {
          "anyOf": [
            {
              "$ref": "#/$defs/Reference_EmbeddingModel_"
            },
            {
              "type": "string"
            }
          ],
          "description": "The embedding model to use.",
          "title": "Model"
        }
      },
      "required": [
        "id",
        "model"
      ],
      "title": "InvokeEmbedding",
      "type": "object"
    },
    "InvokeFlow": {
      "additionalProperties": false,
      "description": "Invokes a flow with input and output bindings.",
      "properties": {
        "id": {
          "description": "Unique ID of this component.",
          "title": "Id",
          "type": "string"
        },
        "type": {
          "const": "InvokeFlow",
          "default": "InvokeFlow",
          "title": "Type",
          "type": "string"
        },
        "cardinality": {
          "$ref": "#/$defs/StepCardinality",
          "default": "one",
          "description": "Does this step emit 1 (one) or 0...N (many) instances of the outputs?"
        },
        "inputs": {
          "description": "References to the variables required by this step.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Inputs",
          "type": "array"
        },
        "outputs": {
          "description": "References to the variables where output is stored.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Outputs",
          "type": "array"
        },
        "flow": {
          "anyOf": [
            {
              "$ref": "#/$defs/Reference_Flow_"
            },
            {
              "type": "string"
            }
          ],
          "description": "Flow to invoke.",
          "title": "Flow"
        },
        "input_bindings": {
          "additionalProperties": {
            "type": "string"
          },
          "description": "Mapping from variable references to flow input variable IDs.",
          "propertyNames": {
            "$ref": "#/$defs/Reference_Variable_"
          },
          "title": "Input Bindings",
          "type": "object"
        },
        "output_bindings": {
          "additionalProperties": {
            "type": "string"
          },
          "description": "Mapping from variable references to flow output variable IDs.",
          "propertyNames": {
            "$ref": "#/$defs/Reference_Variable_"
          },
          "title": "Output Bindings",
          "type": "object"
        }
      },
      "required": [
        "id",
        "flow",
        "input_bindings",
        "output_bindings"
      ],
      "title": "InvokeFlow",
      "type": "object"
    },
    "InvokeTool": {
      "additionalProperties": false,
      "description": "Invokes a tool with input and output bindings.",
      "properties": {
        "concurrency_config": {
          "$ref": "#/$defs/ConcurrencyConfig",
          "description": "Configuration for processing the input stream concurrently. If omitted, the step processes items sequentially."
        },
        "id": {
          "description": "Unique ID of this component.",
          "title": "Id",
          "type": "string"
        },
        "type": {
          "const": "InvokeTool",
          "default": "InvokeTool",
          "title": "Type",
          "type": "string"
        },
        "cardinality": {
          "$ref": "#/$defs/StepCardinality",
          "default": "one",
          "description": "Does this step emit 1 (one) or 0...N (many) instances of the outputs?"
        },
        "inputs": {
          "description": "References to the variables required by this step.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Inputs",
          "type": "array"
        },
        "outputs": {
          "description": "References to the variables where output is stored.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Outputs",
          "type": "array"
        },
        "tool": {
          "anyOf": [
            {
              "$ref": "#/$defs/Reference_Annotated_Union_APITool__PythonFunctionTool___FieldInfo_annotation_NoneType__required_True__discriminator__type____"
            },
            {
              "type": "string"
            }
          ],
          "description": "Tool to invoke.",
          "title": "Tool"
        },
        "input_bindings": {
          "additionalProperties": {
            "type": "string"
          },
          "description": "Mapping from variable references to tool input parameter names.",
          "title": "Input Bindings",
          "type": "object"
        },
        "output_bindings": {
          "additionalProperties": {
            "type": "string"
          },
          "description": "Mapping from variable references to tool output parameter names.",
          "title": "Output Bindings",
          "type": "object"
        }
      },
      "required": [
        "id",
        "tool",
        "input_bindings",
        "output_bindings"
      ],
      "title": "InvokeTool",
      "type": "object"
    },
    "LLMInference": {
      "additionalProperties": false,
      "description": "Defines a step that performs inference using a language model.\nIt can take input variables and produce output variables based on the model's response.",
      "properties": {
        "concurrency_config": {
          "$ref": "#/$defs/ConcurrencyConfig",
          "description": "Configuration for processing the input stream concurrently. If omitted, the step processes items sequentially."
        },
        "id": {
          "description": "Unique ID of this component.",
          "title": "Id",
          "type": "string"
        },
        "type": {
          "const": "LLMInference",
          "default": "LLMInference",
          "title": "Type",
          "type": "string"
        },
        "cardinality": {
          "$ref": "#/$defs/StepCardinality",
          "default": "one",
          "description": "Does this step emit 1 (one) or 0...N (many) instances of the outputs?"
        },
        "inputs": {
          "description": "References to the variables required by this step.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Inputs",
          "type": "array"
        },
        "outputs": {
          "description": "References to the variables where output is stored.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Outputs",
          "type": "array"
        },
        "memory": {
          "anyOf": [
            {
              "$ref": "#/$defs/Reference_Memory_"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "A reference to a Memory object to retain context across interactions.",
          "title": "Memory"
        },
        "model": {
          "anyOf": [
            {
              "$ref": "#/$defs/Reference_Model_"
            },
            {
              "type": "string"
            }
          ],
          "description": "The model to use for inference.",
          "title": "Model"
        },
        "system_message": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Optional system message to set the context for the model.",
          "title": "System Message"
        }
      },
      "required": [
        "id",
        "model"
      ],
      "title": "LLMInference",
      "type": "object"
    },
    "ListType": {
      "description": "Represents a list type with a specific element type.",
      "properties": {
        "element_type": {
          "anyOf": [
            {
              "$ref": "#/$defs/PrimitiveTypeEnum"
            },
            {
              "type": "string"
            }
          ],
          "description": "Type of elements in the list (primitive type or custom type reference)",
          "title": "Element Type"
        }
      },
      "required": [
        "element_type"
      ],
      "title": "ListType",
      "type": "object"
    },
    "Memory": {
      "additionalProperties": false,
      "description": "Session or persistent memory used to store relevant conversation or state data across steps or turns.",
      "properties": {
        "id": {
          "description": "Unique ID of the memory block.",
          "title": "Id",
          "type": "string"
        },
        "token_limit": {
          "default": 100000,
          "description": "Maximum number of tokens to store in memory.",
          "title": "Token Limit",
          "type": "integer"
        },
        "chat_history_token_ratio": {
          "default": 0.7,
          "description": "Ratio of chat history tokens to total memory tokens.",
          "title": "Chat History Token Ratio",
          "type": "number"
        },
        "token_flush_size": {
          "default": 3000,
          "description": "Size of memory to flush when it exceeds the token limit.",
          "title": "Token Flush Size",
          "type": "integer"
        }
      },
      "required": [
        "id"
      ],
      "title": "Memory",
      "type": "object"
    },
    "Model": {
      "additionalProperties": false,
      "description": "Describes a generative model configuration, including provider and model ID.",
      "properties": {
        "type": {
          "const": "Model",
          "default": "Model",
          "title": "Type",
          "type": "string"
        },
        "id": {
          "description": "Unique ID for the model.",
          "title": "Id",
          "type": "string"
        },
        "auth": {
          "anyOf": [
            {
              "$ref": "#/$defs/Reference_Union_APIKeyAuthProvider__BearerTokenAuthProvider__AWSAuthProvider__OAuth2AuthProvider__VertexAuthProvider__"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "AuthorizationProvider used for model access.",
          "title": "Auth"
        },
        "inference_params": {
          "additionalProperties": true,
          "description": "Optional inference parameters like temperature or max_tokens.",
          "title": "Inference Params",
          "type": "object"
        },
        "model_id": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "The specific model name or ID for the provider. If None, id is used",
          "title": "Model Id"
        },
        "provider": {
          "description": "Name of the provider, e.g., openai or anthropic.",
          "title": "Provider",
          "type": "string"
        }
      },
      "required": [
        "id",
        "provider"
      ],
      "title": "Model",
      "type": "object"
    },
    "ModelList": {
      "description": "Schema for a standalone list of models.",
      "items": {
        "discriminator": {
          "mapping": {
            "EmbeddingModel": "#/$defs/EmbeddingModel",
            "Model": "#/$defs/Model"
          },
          "propertyName": "type"
        },
        "oneOf": [
          {
            "$ref": "#/$defs/EmbeddingModel"
          },
          {
            "$ref": "#/$defs/Model"
          }
        ]
      },
      "title": "ModelList",
      "type": "array"
    },
    "OAuth2AuthProvider": {
      "additionalProperties": false,
      "description": "OAuth2 authentication provider.",
      "properties": {
        "id": {
          "description": "Unique ID of the authorization configuration.",
          "title": "Id",
          "type": "string"
        },
        "type": {
          "const": "oauth2",
          "default": "oauth2",
          "title": "Type",
          "type": "string"
        },
        "client_id": {
          "description": "OAuth2 client ID.",
          "title": "Client Id",
          "type": "string"
        },
        "client_secret": {
          "description": "OAuth2 client secret.",
          "title": "Client Secret",
          "type": "string"
        },
        "token_url": {
          "description": "Token endpoint URL.",
          "title": "Token Url",
          "type": "string"
        },
        "scopes": {
          "description": "OAuth2 scopes required.",
          "items": {
            "type": "string"
          },
          "title": "Scopes",
          "type": "array"
        }
      },
      "required": [
        "id",
        "client_id",
        "client_secret",
        "token_url"
      ],
      "title": "OAuth2AuthProvider",
      "type": "object"
    },
    "PrimitiveTypeEnum": {
      "description": "Represents the type of data a user or system input can accept within the DSL.",
      "enum": [
        "audio",
        "boolean",
        "bytes",
        "date",
        "datetime",
        "int",
        "file",
        "float",
        "image",
        "text",
        "time",
        "video"
      ],
      "title": "PrimitiveTypeEnum",
      "type": "string"
    },
    "PromptTemplate": {
      "additionalProperties": false,
      "description": "Defines a prompt template with a string format and variable bindings.\nThis is used to generate prompts dynamically based on input variables.",
      "properties": {
        "id": {
          "description": "Unique ID of this component.",
          "title": "Id",
          "type": "string"
        },
        "type": {
          "const": "PromptTemplate",
          "default": "PromptTemplate",
          "title": "Type",
          "type": "string"
        },
        "cardinality": {
          "$ref": "#/$defs/StepCardinality",
          "default": "one",
          "description": "Does this step emit 1 (one) or 0...N (many) instances of the outputs?"
        },
        "inputs": {
          "description": "References to the variables required by this step.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Inputs",
          "type": "array"
        },
        "outputs": {
          "description": "References to the variables where output is stored.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Outputs",
          "type": "array"
        },
        "template": {
          "description": "String template for the prompt with variable placeholders.",
          "title": "Template",
          "type": "string"
        }
      },
      "required": [
        "id",
        "template"
      ],
      "title": "PromptTemplate",
      "type": "object"
    },
    "PythonFunctionTool": {
      "additionalProperties": false,
      "description": "Tool that calls a Python function.",
      "properties": {
        "id": {
          "description": "Unique ID of this component.",
          "title": "Id",
          "type": "string"
        },
        "name": {
          "description": "Name of the tool function.",
          "title": "Name",
          "type": "string"
        },
        "description": {
          "description": "Description of what the tool does.",
          "title": "Description",
          "type": "string"
        },
        "inputs": {
          "additionalProperties": {
            "$ref": "#/$defs/ToolParameter"
          },
          "description": "Input parameters required by this tool.",
          "title": "Inputs",
          "type": "object"
        },
        "outputs": {
          "additionalProperties": {
            "$ref": "#/$defs/ToolParameter"
          },
          "description": "Output parameters produced by this tool.",
          "title": "Outputs",
          "type": "object"
        },
        "type": {
          "const": "PythonFunctionTool",
          "default": "PythonFunctionTool",
          "title": "Type",
          "type": "string"
        },
        "function_name": {
          "description": "Name of the Python function to call.",
          "title": "Function Name",
          "type": "string"
        },
        "module_path": {
          "description": "Optional module path where the function is defined.",
          "title": "Module Path",
          "type": "string"
        }
      },
      "required": [
        "id",
        "name",
        "description",
        "function_name",
        "module_path"
      ],
      "title": "PythonFunctionTool",
      "type": "object"
    },
    "Reference_Annotated_Union_APITool__PythonFunctionTool___FieldInfo_annotation_NoneType__required_True__discriminator__type____": {
      "properties": {
        "$ref": {
          "title": "$Ref",
          "type": "string"
        }
      },
      "required": [
        "$ref"
      ],
      "title": "Reference[Annotated[Union[APITool, PythonFunctionTool], FieldInfo(annotation=NoneType, required=True, discriminator='type')]]",
      "type": "object"
    },
    "Reference_Annotated_Union_Agent__Aggregate__Decoder__DocToTextConverter__DocumentEmbedder__DocumentSearch__DocumentSplitter__DocumentSource__InvokeEmbedding__FileWriter__FileSource__IndexUpsert__InvokeFlow__InvokeTool__LLMInference__PromptTemplate__SQLSource__VectorSearch___FieldInfo_annotation_NoneType__required_True__discriminator__type____": {
      "properties": {
        "$ref": {
          "title": "$Ref",
          "type": "string"
        }
      },
      "required": [
        "$ref"
      ],
      "title": "Reference[Annotated[Union[Agent, Aggregate, Decoder, DocToTextConverter, DocumentEmbedder, DocumentSearch, DocumentSplitter, DocumentSource, InvokeEmbedding, FileWriter, FileSource, IndexUpsert, InvokeFlow, InvokeTool, LLMInference, PromptTemplate, SQLSource, VectorSearch], FieldInfo(annotation=NoneType, required=True, discriminator='type')]]",
      "type": "object"
    },
    "Reference_Annotated_Union_DocumentIndex__VectorIndex___FieldInfo_annotation_NoneType__required_True__discriminator__type____": {
      "properties": {
        "$ref": {
          "title": "$Ref",
          "type": "string"
        }
      },
      "required": [
        "$ref"
      ],
      "title": "Reference[Annotated[Union[DocumentIndex, VectorIndex], FieldInfo(annotation=NoneType, required=True, discriminator='type')]]",
      "type": "object"
    },
    "Reference_EmbeddingModel_": {
      "properties": {
        "$ref": {
          "title": "$Ref",
          "type": "string"
        }
      },
      "required": [
        "$ref"
      ],
      "title": "Reference[EmbeddingModel]",
      "type": "object"
    },
    "Reference_Flow_": {
      "properties": {
        "$ref": {
          "title": "$Ref",
          "type": "string"
        }
      },
      "required": [
        "$ref"
      ],
      "title": "Reference[Flow]",
      "type": "object"
    },
    "Reference_Memory_": {
      "properties": {
        "$ref": {
          "title": "$Ref",
          "type": "string"
        }
      },
      "required": [
        "$ref"
      ],
      "title": "Reference[Memory]",
      "type": "object"
    },
    "Reference_Model_": {
      "properties": {
        "$ref": {
          "title": "$Ref",
          "type": "string"
        }
      },
      "required": [
        "$ref"
      ],
      "title": "Reference[Model]",
      "type": "object"
    },
    "Reference_Union_APIKeyAuthProvider__BearerTokenAuthProvider__AWSAuthProvider__OAuth2AuthProvider__VertexAuthProvider__": {
      "properties": {
        "$ref": {
          "title": "$Ref",
          "type": "string"
        }
      },
      "required": [
        "$ref"
      ],
      "title": "Reference[Union[APIKeyAuthProvider, BearerTokenAuthProvider, AWSAuthProvider, OAuth2AuthProvider, VertexAuthProvider]]",
      "type": "object"
    },
    "Reference_Variable_": {
      "properties": {
        "$ref": {
          "title": "$Ref",
          "type": "string"
        }
      },
      "required": [
        "$ref"
      ],
      "title": "Reference[Variable]",
      "type": "object"
    },
    "SQLSource": {
      "additionalProperties": false,
      "description": "SQL database source that executes queries and emits rows.",
      "properties": {
        "id": {
          "description": "Unique ID of the data source.",
          "title": "Id",
          "type": "string"
        },
        "type": {
          "const": "SQLSource",
          "default": "SQLSource",
          "title": "Type",
          "type": "string"
        },
        "cardinality": {
          "const": "many",
          "default": "many",
          "description": "Sources always emit 0...N instances of the outputs.",
          "title": "Cardinality",
          "type": "string"
        },
        "inputs": {
          "description": "References to the variables required by this step.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Inputs",
          "type": "array"
        },
        "outputs": {
          "description": "References to the variables where output is stored.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Outputs",
          "type": "array"
        },
        "query": {
          "description": "SQL query to execute. Inputs are injected as params.",
          "title": "Query",
          "type": "string"
        },
        "connection": {
          "description": "Database connection string or reference to auth provider. Typically in SQLAlchemy format.",
          "title": "Connection",
          "type": "string"
        },
        "auth": {
          "anyOf": [
            {
              "$ref": "#/$defs/Reference_Union_APIKeyAuthProvider__BearerTokenAuthProvider__AWSAuthProvider__OAuth2AuthProvider__VertexAuthProvider__"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Optional AuthorizationProvider for database authentication.",
          "title": "Auth"
        }
      },
      "required": [
        "id",
        "query",
        "connection"
      ],
      "title": "SQLSource",
      "type": "object"
    },
    "StepCardinality": {
      "description": "Does this step emit 1 (one) or 0...N (many) items?",
      "enum": [
        "one",
        "many"
      ],
      "title": "StepCardinality",
      "type": "string"
    },
    "TelemetrySink": {
      "additionalProperties": false,
      "description": "Defines an observability endpoint for collecting telemetry data from the QType runtime.",
      "properties": {
        "id": {
          "description": "Unique ID of the telemetry sink configuration.",
          "title": "Id",
          "type": "string"
        },
        "auth": {
          "anyOf": [
            {
              "$ref": "#/$defs/Reference_Union_APIKeyAuthProvider__BearerTokenAuthProvider__AWSAuthProvider__OAuth2AuthProvider__VertexAuthProvider__"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "AuthorizationProvider used to authenticate telemetry data transmission.",
          "title": "Auth"
        },
        "endpoint": {
          "description": "URL endpoint where telemetry data will be sent.",
          "title": "Endpoint",
          "type": "string"
        }
      },
      "required": [
        "id",
        "endpoint"
      ],
      "title": "TelemetrySink",
      "type": "object"
    },
    "ToolList": {
      "description": "Schema for a standalone list of tools.",
      "items": {
        "discriminator": {
          "mapping": {
            "APITool": "#/$defs/APITool",
            "PythonFunctionTool": "#/$defs/PythonFunctionTool"
          },
          "propertyName": "type"
        },
        "oneOf": [
          {
            "$ref": "#/$defs/APITool"
          },
          {
            "$ref": "#/$defs/PythonFunctionTool"
          }
        ]
      },
      "title": "ToolList",
      "type": "array"
    },
    "ToolParameter": {
      "description": "Defines a tool input or output parameter with type and optional flag.",
      "properties": {
        "type": {
          "anyOf": [
            {
              "$ref": "#/$defs/PrimitiveTypeEnum"
            },
            {},
            {
              "$ref": "#/$defs/ListType"
            },
            {
              "type": "string"
            }
          ],
          "title": "Type"
        },
        "optional": {
          "default": false,
          "description": "Whether this parameter is optional",
          "title": "Optional",
          "type": "boolean"
        }
      },
      "required": [
        "type"
      ],
      "title": "ToolParameter",
      "type": "object"
    },
    "TypeList": {
      "description": "Schema for a standalone list of type definitions.",
      "items": {
        "$ref": "#/$defs/CustomType"
      },
      "title": "TypeList",
      "type": "array"
    },
    "Variable": {
      "additionalProperties": false,
      "description": "Schema for a variable that can serve as input, output, or parameter within the DSL.",
      "properties": {
        "id": {
          "description": "Unique ID of the variable. Referenced in prompts or steps.",
          "title": "Id",
          "type": "string"
        },
        "type": {
          "anyOf": [
            {
              "$ref": "#/$defs/PrimitiveTypeEnum"
            },
            {},
            {
              "$ref": "#/$defs/ListType"
            },
            {
              "type": "string"
            }
          ],
          "description": "Type of data expected or produced. Either a CustomType or domain specific type.",
          "title": "Type"
        }
      },
      "required": [
        "id",
        "type"
      ],
      "title": "Variable",
      "type": "object"
    },
    "VariableList": {
      "description": "Schema for a standalone list of variables.",
      "items": {
        "$ref": "#/$defs/Variable"
      },
      "title": "VariableList",
      "type": "array"
    },
    "VectorIndex": {
      "additionalProperties": false,
      "description": "Vector database index for similarity search using embeddings.",
      "properties": {
        "id": {
          "description": "Unique ID of the index.",
          "title": "Id",
          "type": "string"
        },
        "args": {
          "additionalProperties": true,
          "description": "Index-specific configuration and connection parameters.",
          "title": "Args",
          "type": "object"
        },
        "auth": {
          "anyOf": [
            {
              "$ref": "#/$defs/Reference_Union_APIKeyAuthProvider__BearerTokenAuthProvider__AWSAuthProvider__OAuth2AuthProvider__VertexAuthProvider__"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "AuthorizationProvider for accessing the index.",
          "title": "Auth"
        },
        "name": {
          "description": "Name of the index/collection/table.",
          "title": "Name",
          "type": "string"
        },
        "type": {
          "const": "VectorIndex",
          "default": "VectorIndex",
          "title": "Type",
          "type": "string"
        },
        "embedding_model": {
          "anyOf": [
            {
              "$ref": "#/$defs/Reference_EmbeddingModel_"
            },
            {
              "type": "string"
            }
          ],
          "description": "Embedding model used to vectorize queries and documents.",
          "title": "Embedding Model"
        }
      },
      "required": [
        "id",
        "name",
        "embedding_model"
      ],
      "title": "VectorIndex",
      "type": "object"
    },
    "VectorSearch": {
      "additionalProperties": false,
      "description": "Performs vector similarity search against a vector index.",
      "properties": {
        "batch_config": {
          "$ref": "#/$defs/BatchConfig",
          "description": "Configuration for processing the input stream in batches. If omitted, the step processes items one by one."
        },
        "id": {
          "description": "Unique ID of this component.",
          "title": "Id",
          "type": "string"
        },
        "type": {
          "const": "VectorSearch",
          "default": "VectorSearch",
          "title": "Type",
          "type": "string"
        },
        "cardinality": {
          "$ref": "#/$defs/StepCardinality",
          "default": "one",
          "description": "Does this step emit 1 (one) or 0...N (many) instances of the outputs?"
        },
        "inputs": {
          "description": "References to the variables required by this step.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Inputs",
          "type": "array"
        },
        "outputs": {
          "description": "References to the variables where output is stored.",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/Reference_Variable_"
              },
              {
                "type": "string"
              }
            ]
          },
          "title": "Outputs",
          "type": "array"
        },
        "filters": {
          "additionalProperties": true,
          "description": "Optional filters to apply during search.",
          "title": "Filters",
          "type": "object"
        },
        "index": {
          "anyOf": [
            {
              "$ref": "#/$defs/Reference_Annotated_Union_DocumentIndex__VectorIndex___FieldInfo_annotation_NoneType__required_True__discriminator__type____"
            },
            {
              "type": "string"
            }
          ],
          "description": "Index to search against (object or ID reference).",
          "title": "Index"
        },
        "default_top_k": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": 50,
          "description": "Number of top results to retrieve if not provided in the inputs.",
          "title": "Default Top K"
        }
      },
      "required": [
        "id",
        "index"
      ],
      "title": "VectorSearch",
      "type": "object"
    },
    "VertexAuthProvider": {
      "additionalProperties": false,
      "description": "Google Vertex authentication provider supporting gcloud profile or service account.",
      "properties": {
        "id": {
          "description": "Unique ID of the authorization configuration.",
          "title": "Id",
          "type": "string"
        },
        "type": {
          "const": "vertex",
          "default": "vertex",
          "title": "Type",
          "type": "string"
        },
        "profile_name": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Local gcloud profile name (if using existing CLI credentials).",
          "title": "Profile Name"
        },
        "project_id": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Explicit GCP project ID override (if different from profile).",
          "title": "Project Id"
        },
        "service_account_file": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Path to a service account JSON key file.",
          "title": "Service Account File"
        },
        "region": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Vertex region (e.g., us-central1).",
          "title": "Region"
        }
      },
      "required": [
        "id"
      ],
      "title": "VertexAuthProvider",
      "type": "object"
    },
    "qtype_include_tag": {
      "type": "string",
      "pattern": "^!include\\s+.+",
      "description": "Include external YAML file using QType's !include tag"
    },
    "qtype_include_raw_tag": {
      "type": "string",
      "pattern": "^!include_raw\\s+.+",
      "description": "Include raw text file using QType's !include_raw tag"
    },
    "qtype_env_var": {
      "type": "string",
      "pattern": "^.*\\$\\{[^}:]+(?::[^}]*)?\\}.*$",
      "description": "String with environment variable substitution using ${VAR_NAME} or ${VAR_NAME:default} syntax"
    }
  },
  "$ref": "#/$defs/Document",
  "$schema": "http://json-schema.org/draft-07/schema#"
}